<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href = "estilosAlta.css">
<script>


function llamada(id){
	fetch('../GestionEmpleados?id='+id+'&option=2')
	.then(response =>  response.json())
	.then(data => {
		console.log(data);
		llenarFormulario(data);
	})
	
}


function getQueryVariable(variable) {
 var query = window.location.search.substring(1);
 var vars = query.split("&");
 for (var i=0; i < vars.length; i++) {
     var pair = vars[i].split("=");
     if(pair[0] == variable) {
         return pair[1];
     }
 }
 return false;
}


function  llenarFormulario(datos) {
	document.getElementById('id').value = datos.id;
	document.getElementById('nombre').value = datos.nombre;
	document.getElementById('email').value = datos.email;
	document.getElementById('salario').value = datos.salario;
	document.getElementById('departamento_id').value = datos.departamento_id;
	console.log(datos.id);
	
	//document.getElementById('boton').value = "Actualizar";

}





window.onload = function(){
	//console.log("El id es:  ")
	//console.log(getQueryVariable("id"));
	
	llamada(getQueryVariable("id"));
}

</script>    
</head>
<body>
<h2>Editar Empleado</h2>
  <form action="../GestionEmpleados" method="POST" class = "form-alta">
  
  	<input type="hidden" id="id" name="id" value="0"/>
  
    <label for="nombre">Nombre:</label>
    <input type="text" id="nombre" name="nombre" required /><br />

    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required /><br />

    <label for="salario">Salario:</label>
    <input type="number" id="salario" name="salario" required /><br />
    
     <label for="departamento_id">Selecciona un departamento:</label>
    <select name="departamento_id" id="departamento_id">
        <option value="1">Front-end</option>
        <option value="2">Back-end</option>
        <option value="3">Ciberseguridad</option>
    </select><br />

    <button type="submit" class="btn" value="Actualizar Empleado">Actualizar</button>
    
   
  </form>
  
   <a href = "listadoEmpleados.html" id="listado">
    <button>Listado de Empleados</button>
    </a>
     <footer>
        <button onclick="logout()">Cerrar sesión</button>
    </footer>

    <script>
        // Función de logout
        function logout() {
            sessionStorage.removeItem('usuarioLogueado');
            window.location.href = '/EMPLEADOS/gestor/index.html'; // Redirige al login
        }
    </script>
</body>
</html>